{"version":3,"sources":["../../../src/test/auth/auth.test.js"],"names":["describe","beforeEach","done","User","deleteMany","err","user","email","password","it","app","post","send","set","expect","end","res","body","to","have","property","deep","console","log","be","an","after","mongoose","disconnect"],"mappings":";;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAPA;AASAA,QAAQ,CAAC,gCAAD,EAAmC,YAAM;AAC/CC,EAAAA,UAAU,CAAC,UAAAC,IAAI,EAAI;AACjB;AACAC,qBAAKC,UAAL,CAAgB,EAAhB,EAAoB,UAAAC,GAAG,EAAI;AACzBH,MAAAA,IAAI;AACL,KAFD;AAGD,GALS,CAAV;AAOA,MAAII,IAAI,GAAG;AACTC,IAAAA,KAAK,EAAE,eADE;AAETC,IAAAA,QAAQ,EAAE;AAFD,GAAX;AAIAC,EAAAA,EAAE,CAAC,oCAAD,EAAuC,UAAAP,IAAI,EAAI;AAC/C,+BAAQQ,kBAAR,EACGC,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQN,IAFR,EAGGO,GAHH,CAGO,QAHP,EAGiB,kBAHjB,EAIGC,MAJH,CAIU,cAJV,EAI0B,MAJ1B,EAKGA,MALH,CAKU,GALV,EAMGC,GANH,CAMO,UAACV,GAAD,EAAMW,GAAN,EAAc;AACjB,wBAAOA,GAAG,CAACC,IAAX,EAAiBC,EAAjB,CAAoBC,IAApB,CAAyBC,QAAzB,CAAkC,SAAlC;AACA,wBAAOJ,GAAG,CAACC,IAAX,EAAiBC,EAAjB,CAAoBC,IAApB,CAAyBE,IAAzB,CAA8BD,QAA9B,CACE,SADF,EAEE,2BAFF;AAIAlB,MAAAA,IAAI;AACL,KAbH;AAcAoB,IAAAA,OAAO,CAACC,GAAR,CAAYjB,IAAI,CAACE,QAAjB;AACD,GAhBC,CAAF;AAkBAC,EAAAA,EAAE,CAAC,uDAAD,EAA0D,UAAAP,IAAI,EAAI;AAClE,QAAII,IAAI,GAAG;AACTC,MAAAA,KAAK,EAAE,gBADE;AAETC,MAAAA,QAAQ,EAAE;AAFD,KAAX;AAIA,+BAAQE,kBAAR,EACGC,IADH,CACQ,kBADR,EAEGC,IAFH,CAEQN,IAFR,EAGGO,GAHH,CAGO,QAHP,EAGiB,kBAHjB,EAIGC,MAJH,CAIU,cAJV,EAI0B,MAJ1B,EAKGA,MALH,CAKU,GALV,EAMGC,GANH,CAMO,UAACV,GAAD,EAAMW,GAAN,EAAc;AACjB,wBAAOA,GAAG,CAACC,IAAX,EAAiBC,EAAjB,CAAoBM,EAApB,CAAuBC,EAAvB,CAA0B,QAA1B;AACA,wBAAOT,GAAG,CAACC,IAAX,EAAiBC,EAAjB,CAAoBC,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACA,wBAAOJ,GAAG,CAACC,IAAX,EAAiBC,EAAjB,CAAoBC,IAApB,CAAyBE,IAAzB,CAA8BD,QAA9B,CAAuC,OAAvC,EAAgD,gBAAhD;AACAlB,MAAAA,IAAI;AACL,KAXH;AAYEoB,IAAAA,OAAO,CAACC,GAAR,CAAYjB,IAAI,CAACE,QAAjB;AACH,GAlBC,CAAF;AAoBAkB,EAAAA,KAAK,CAAC,UAASxB,IAAT,EAAe;AACnB,WAAOyB,qBAASC,UAAT,CAAoB1B,IAApB,CAAP;AACD,GAFI,CAAL;AAGD,CArDO,CAAR","sourcesContent":["/* eslint-disable no-undef */\r\nimport request from 'supertest';\r\nimport mongoose from 'mongoose';\r\nimport faker from 'faker';\r\nimport { expect } from 'chai';\r\nimport app from '../../server';\r\nimport assert from 'assert';\r\nimport User from '../../database/models/User';\r\n\r\ndescribe('[Authentication] /auth Testing', () => {\r\n  beforeEach(done => {\r\n    //Before each test we empty the database\r\n    User.deleteMany({}, err => {\r\n      done();\r\n    });\r\n  });\r\n\r\n  let user = {\r\n    email: 'jane@test.com',\r\n    password: '123456'\r\n  };\r\n  it('should be able to sign up new user', done => {\r\n    request(app)\r\n      .post('/api/auth/register/')\r\n      .send(user)\r\n      .set('Accept', 'application/json')\r\n      .expect('Content-Type', /json/)\r\n      .expect(201)\r\n      .end((err, res) => {\r\n        expect(res.body).to.have.property('message');\r\n        expect(res.body).to.have.deep.property(\r\n          'message',\r\n          'User created successfully'\r\n        );\r\n        done();\r\n      });\r\n    console.log(user.password);\r\n  });\r\n\r\n  it('should not be able to sign in user with invalid email', done => {\r\n    let user = {\r\n      email: 'jane@test.com9',\r\n      password: '123456'\r\n    };\r\n    request(app)\r\n      .post('/api/auth/login/')\r\n      .send(user)\r\n      .set('Accept', 'application/json')\r\n      .expect('Content-Type', /json/)\r\n      .expect(401)\r\n      .end((err, res) => {\r\n        expect(res.body).to.be.an('object');\r\n        expect(res.body).to.have.property('error');\r\n        expect(res.body).to.have.deep.property('error', 'User not found');\r\n        done();\r\n      });\r\n      console.log(user.password);\r\n  });\r\n\r\n  after(function(done) {\r\n    return mongoose.disconnect(done);\r\n  });\r\n});\r\n"],"file":"auth.test.js"}